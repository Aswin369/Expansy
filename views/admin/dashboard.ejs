
<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:41:47 GMT -->
<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Expansy || Dashboard</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="/assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="/assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" />

     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- ApexCharts CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.0/apexcharts.min.css">

     <!-- Theme Config js (Require in all Page) -->
     <script src="/assets/js/config.js"></script>
     <style>
          .card {
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            border: none;
            border-radius: 0.5rem;
        }
        .avatar-md {
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .chart-container {
            min-height: 300px;
            width: 100%;
        }
        .btn-outline-primary.active {
            background-color: #4e73df;
            color: white;
        }
        .form-select.dropdown-selector {
            max-width: 150px;
        }
          :root {
              --primary-color: #22c55e;
              --secondary-color: #ff6c2f;
              --light-bg: #f8f9fa;
              --border-color: #e9ecef;
          }
          
          body {
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              background-color: #232427;
          }
          
          .dashboard-title {
              color: #22282e;
              margin-bottom: 20px;
              font-weight: 600;
          }
          
          .card {
              border-radius: 10px;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
              margin-bottom: 25px;
              border: none;
          }
          
          .card-header {
              background-color: #22282e;
              border-bottom: 1px solid var(--border-color);
              padding: 18px 20px;
              border-radius: 10px 10px 0 0 !important;
          }
          
          .card-title {
              font-size: 18px;
              font-weight: 600;
              color: #eeeeee;
              margin-bottom: 0;
          }
          
          .card-body {
              padding: 20px;
          }
          
          .btn-outline-light {
              color: #6c757d;
              border-color: #dee2e6;
          }
          
          
          .chart-container {
              min-height: 350px;
          }
          
          .dropdown-selector {
              max-width: 200px;
          }
          
          .highlight {
              color: var(--secondary-color);
              font-weight: bold;
          }
          
          @media (max-width: 767px) {
              .card-header {
                  flex-direction: column;
                  align-items: flex-start !important;
              }
              
              .card-header .btn-group {
                  margin-top: 10px;
              }
          }
      </style>
</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Welcome Admin!</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              

                              <!-- Notification -->
                              <div class="dropdown topbar-item">
                                   
                                   <div class="dropdown-menu py-0 dropdown-lg dropdown-menu-end" aria-labelledby="page-header-notifications-dropdown">
                                        
                                        <div data-simplebar style="max-height: 280px;">
                                             <!-- Item -->
                                             
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-info text-info fs-20 rounded-circle">
                                                                      D
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Donoghue Susan</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Hi, How are you? What about our next meeting
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-3.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-3" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Jacob Gines</p>
                                                            <p class="mb-0 text-wrap">Answered to your comment on the cash flow forecast's graph ðŸ””.</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-warning text-warning fs-20 rounded-circle">
                                                                      <iconify-icon icon="iconamoon:comment-dots-duotone"></iconify-icon>
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold text-wrap">You have received <b>20</b> new messages in the
                                                                 conversation</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-5.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-5" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Shawn Bunch</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Commented on Admin
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                        </div>
                                        <div class="text-center py-3">
                                             <a href="javascript:void(0);" class="btn btn-primary btn-sm">View All Notification <i class="bx bx-right-arrow-alt ms-1"></i></a>
                                        </div>
                                   </div>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                  
                              </div>

                              <!-- Activity -->
                             

                              <!-- User -->
                              <div class="dropdown topbar-item">
                                   
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <h6 class="dropdown-header">Welcome Gaston!</h6>
                                        <a class="dropdown-item" href="pages-profile.html">
                                             <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Profile</span>
                                        </a>
                                        <a class="dropdown-item" href="apps-chat.html">
                                             <i class="bx bx-message-dots text-muted fs-18 align-middle me-1"></i><span class="align-middle">Messages</span>
                                        </a>

                                        <a class="dropdown-item" href="pages-pricing.html">
                                             <i class="bx bx-wallet text-muted fs-18 align-middle me-1"></i><span class="align-middle">Pricing</span>
                                        </a>
                                        <a class="dropdown-item" href="pages-faqs.html">
                                             <i class="bx bx-help-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Help</span>
                                        </a>
                                        <a class="dropdown-item" href="auth-lock-screen.html">
                                             <i class="bx bx-lock text-muted fs-18 align-middle me-1"></i><span class="align-middle">Lock screen</span>
                                        </a>

                                        <div class="dropdown-divider my-1"></div>

                                        <a class="dropdown-item text-danger">
                                             <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle" onclick="handleLogout()"  >Logout</span>
                                        </a>
                                   </div>
                              </div>

                             
                         </div>
                    </div>
               </div>
          </header>
          <!-- Activity Timeline -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-activity-offcanvas" style="max-width: 450px; width: 100%;">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0 fw-semibold">Activity Stream</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100 p-4">
                              <div class="position-relative ms-2">
                                   <span class="position-absolute start-0  top-0 border border-dashed h-100"></span>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-danger d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:folder-check-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Report-Fix / Update </h5>
                                                  <p class="d-flex align-items-center">Add 3 files to <span class=" d-flex align-items-center text-primary ms-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Tasks</span></p>
                                                  <div class="bg-light bg-opacity-50 rounded-2 p-2">
                                                       <div class="row">
                                                            <div class="col-lg-6 border-end border-light">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-figma fs-20 text-red"></i>
                                                                      <a href="#!" class="text-dark fw-medium">Concept.fig</a>
                                                                 </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-file-doc fs-20 text-success"></i>
                                                                      <a href="#!" class="text-dark fw-medium">larkon.docs</a>
                                                                 </div>
                                                            </div>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-2 text-muted">Monday , 4:24 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-success d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:check-circle-1-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Project Status
                                                  </h5>
                                                  <p class="d-flex align-items-center mb-0">Marked<span class=" d-flex align-items-center text-primary mx-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Design </span> as <span class="badge bg-success-subtle text-success px-2 py-1 ms-1"> Completed</span></p>
                                                  <div class="d-flex align-items-center gap-3 mt-1 bg-light bg-opacity-50 p-2 rounded-2">
                                                       <a href="#!" class="fw-medium text-dark">UI/UX Figma Design</a>
                                                       <div class="ms-auto">
                                                            <a href="#!" class="fw-medium text-primary fs-18" data-bs-toggle="tooltip" data-bs-title="Download" data-bs-placement="bottom"><iconify-icon icon="iconamoon:cloud-download-duotone"></iconify-icon></a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 3:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-primary d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-16">UI</span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15">Larkon Application UI v2.0.0 <span class="badge bg-primary-subtle text-primary px-2 py-1 ms-1"> Latest</span>
                                                  </h5>
                                                  <p>Get access to over 20+ pages including a dashboard layout, charts, kanban board, calendar, and pre-order E-commerce & Marketing pages.</p>
                                                  <div class="mt-2">
                                                       <a href="#!" class="btn btn-light btn-sm">Download Zip</a>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 2:10 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-7.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Alex Smith Attached Photos
                                                  </h5>
                                                  <div class="row g-2 mt-2">
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-6.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-3.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-4.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday 1:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-6.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Rebecca J. added a new team member
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1"><iconify-icon icon="iconamoon:check-circle-1-duotone" class="text-success"></iconify-icon> Added a new member to Front Dashboard</p>
                                                  <h6 class="mt-3 text-muted">Monday 10:00 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-warning d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:certificate-badge-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Achievements
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1 mt-1">Earned a <iconify-icon icon="iconamoon:certificate-badge-duotone" class="text-danger fs-20"></iconify-icon>" Best Product Award"</p>
                                                  <h6 class="mt-3 text-muted">Monday 9:30 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <a href="#!" class="btn btn-outline-dark w-100">View All</a>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>



          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->

          <!-- paste here the ejs link -->


          <%-include("../../views/partials/admin/nav")%>


          

          





          <!-- Paste here the ejs file -->


          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div class="page-content">

               <!-- Start Container Fluid -->
               <div class="container-fluid">

                    <!-- Start here.... -->
                    
                         
                    <div class="container-fluid p-4">
                         <h1 class="h3 mb-4 text-gray-800">Sales Analytics Dashboard</h1>
                         
                         <!-- Date Filters Section -->
                         <div class="row mb-3">
                             <div class="col-xl-12">
                                 <div class="card">
                                     <div class="card-body">
                                         <div class="d-flex align-items-center gap-2 flex-wrap">
                                             <!-- Date Filters -->
                                             <div class="input-group" style="max-width: 200px;">
                                                 <span class="input-group-text">From</span>
                                                 <input type="date" class="form-control" id="startDate">
                                             </div>
                                 
                                             <div class="input-group" style="max-width: 200px;">
                                                 <span class="input-group-text">To</span>
                                                 <input type="date" class="form-control" id="endDate">
                                             </div>
                                 
                                             <!-- Buttons -->
                                             <button type="button" class="btn btn-primary" id="filterBtn">
                                                 <i class="fas fa-filter me-1"></i>
                                                 Filter
                                             </button>
                                             <button type="button" class="btn btn-outline-primary" id="oneDayBtn">Weekly</button>
                                             <button type="button" class="btn btn-outline-primary" id="oneWeekBtn">Monthly</button>
                                             <button type="button" class="btn btn-outline-primary active" id="oneMonthBtn">Yearly</button>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                         </div>
                         
                         <!-- Stats Cards -->
                         <div class="row mb-4">
                             <div class="col-md-6 col-xl-3">
                                 <div class="card">
                                     <div class="card-body">
                                         <div class="d-flex align-items-center justify-content-between">
                                             <div>
                                                 <h4 class="card-title mb-2">Total Order</h4>
                                                 <p class="text-muted fw-medium fs-22 mb-0">0</p>
                                             </div>
                                             <div>
                                                 <div class="avatar-md bg-primary bg-opacity-10 rounded">
                                                     <i class="fas fa-shopping-cart fs-32 text-primary avatar-title"></i>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             <div class="col-md-6 col-xl-3">
                                 <div class="card">
                                     <div class="card-body">
                                         <div class="d-flex align-items-center justify-content-between">
                                             <div>
                                                 <h4 class="card-title mb-2">Order Cancel</h4>
                                                 <p class="text-muted fw-medium fs-22 mb-0">0</p>
                                             </div>
                                             <div>
                                                 <div class="avatar-md bg-danger bg-opacity-10 rounded">
                                                     <i class="fas fa-times-circle fs-32 text-danger avatar-title"></i>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             <div class="col-md-6 col-xl-3">
                                 <div class="card">
                                     <div class="card-body">
                                         <div class="d-flex align-items-center justify-content-between">
                                             <div>
                                                 <h4 class="card-title mb-2">Order Pending</h4>
                                                 <p class="text-muted fw-medium fs-22 mb-0">0</p>
                                             </div>
                                             <div>
                                                 <div class="avatar-md bg-warning bg-opacity-10 rounded">
                                                     <i class="fas fa-clock fs-32 text-warning avatar-title"></i>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             <div class="col-md-6 col-xl-3">
                                 <div class="card">
                                     <div class="card-body">
                                         <div class="d-flex align-items-center justify-content-between">
                                             <div>
                                                 <h4 class="card-title mb-2">Revenue</h4>
                                                 <p class="text-muted fw-medium fs-22 mb-0" id="totalRevenue">$0</p>
                                             </div>
                                             <div>
                                                 <div class="avatar-md bg-success bg-opacity-10 rounded">
                                                     <i class="fas fa-dollar-sign fs-32 text-success avatar-title"></i>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                         </div>
                         
                         <!-- Charts Row -->
                         <div class="row">
                             <!-- Sales Report by Rate -->
                             <div class="col-lg-7 mb-4">
                                 <div class="card h-100">
                                     <div class="card-header d-flex justify-content-between align-items-center">
                                         <h4 class="card-title">Sales Report by Rate</h4>
                                         <div class="btn-group">
                                             <button type="button" class="btn btn-sm btn-outline-primary" id="all-btn">ALL</button>
                                             <button type="button" class="btn btn-sm btn-outline-primary" id="month-btn">1M</button>
                                             <button type="button" class="btn btn-sm btn-outline-primary" id="sixmonth-btn">6M</button>
                                             <button type="button" class="btn btn-sm btn-outline-primary active" id="year-btn">1Y</button>
                                         </div>
                                     </div>
                                     <div class="card-body">
                                         <div id="sales-rate-chart" class="chart-container"></div>
                                     </div>
                                 </div>
                             </div>
                             
                             <!-- Best Selling Products and Brands -->
                             <!-- Best Selling Section -->
<div class="card bg-dark text-white mb-4">
     <div class="card-header d-flex justify-content-between align-items-center">
       <h4 class="card-title mb-0" id="chart-title">Best Selling Products</h4>
       <div class="d-flex gap-2">
         <button id="products-tab" class="btn btn-sm btn-outline-warning active">Products</button>
         <button id="brands-tab" class="btn btn-sm btn-outline-warning">Brands</button>
         <button id="categories-tab" class="btn btn-sm btn-outline-warning">Categories</button>
       </div>
     </div>
     <div class="card-body">
       <!-- Date Filter Section -->
       <div class="row mb-3">
         <div class="col-12">
           <div class="d-flex align-items-center gap-2 flex-wrap">
             <div class="input-group" style="max-width: 200px;">
               <span class="input-group-text bg-dark text-light border-secondary">From</span>
               <input type="date" class="form-control bg-dark text-light border-secondary" id="startDate">
             </div>
             
             <div class="input-group" style="max-width: 200px;">
               <span class="input-group-text bg-dark text-light border-secondary">To</span>
               <input type="date" class="form-control bg-dark text-light border-secondary" id="endDate">
             </div>
             
             <button type="button" class="btn btn-warning" id="filterBtn">
               <i class="fas fa-filter me-1"></i>
               Filter
             </button>
             
             <button type="button" class="btn btn-outline-warning period-btn" id="weekly-btn">Weekly</button>
             <button type="button" class="btn btn-outline-warning period-btn" id="monthly-btn">Monthly</button>
             <button type="button" class="btn btn-outline-warning period-btn active" id="yearly-btn">Yearly</button>
           </div>
         </div>
       </div>
       
       <!-- Total Units Counter -->
       <div class="mb-3 d-flex justify-content-end">
         <div class="badge bg-warning text-dark p-2">
           <span class="fs-6">Total Units: <span id="total-units" class="fw-bold">0</span></span>
         </div>
       </div>
       
       <!-- Chart Container -->
       <div class="position-relative">
         <div id="best-selling-chart" style="min-height: 400px;"></div>
         
         <!-- Loading Spinner -->
         <div id="chart-loading" class="position-absolute top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center" style="background-color: rgba(30, 30, 45, 0.7); z-index: 10; display: none;">
           <div class="spinner-border text-warning" role="status">
             <span class="visually-hidden">Loading...</span>
           </div>
         </div>
         
         <!-- Error Message -->
         <div id="chart-error" class="alert alert-danger mt-3" style="display: none;"></div>
       </div>
     </div>
   </div>
                         </div>
                     </div>
               <!-- End Container Fluid -->

               <!-- ========== Footer Start ========== -->
               <footer class="footer">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12 text-center">
                                <script>document.write(new Date().getFullYear())</script> &copy; Expansy. Crafted by <iconify-icon icon="iconamoon:heart-duotone" class="fs-18 align-middle text-danger"></iconify-icon> <a
                                    href="https://1.envato.market/techzaa" class="fw-bold footer-text" target="_blank">Aswin Variyath</a>
                            </div>
                        </div>
                    </div>
                </footer>
                <!-- ========== Footer End ========== -->
                
                </div>
                <!-- ==================================================== -->
                <!-- End Page Content -->
                <!-- ==================================================== -->
                
                </div>
                <!-- END Wrapper -->
                
                
                
                <!-- Vendor Javascript (Require in all Page) -->
                <script src="/assets/js/vendor.js"></script>
                
                <!-- App Javascript (Require in all Page) -->
                <script src="/assets/js/app.js"></script>
                
                <!-- Vector Map Js -->
                <script src="/assets/vendor/jsvectormap/js/jsvectormap.min.js"></script>
                <script src="/assets/vendor/jsvectormap/maps/world-merc.js"></script>
                <script src="/assets/vendor/jsvectormap/maps/world.js"></script>
                
                <script>
// Function to initialize all charts when the document is loaded
document.addEventListener('DOMContentLoaded', function() {
  // Initialize charts
  createBestSellingChart();
  
  // Add event listeners for chart type toggling
  document.getElementById('products-tab').addEventListener('click', function() {
    document.getElementById('products-tab').classList.add('active');
    document.getElementById('brands-tab').classList.remove('active');
    document.getElementById('categories-tab').classList.remove('active');
    createBestSellingChart('products');
  });
  
  document.getElementById('brands-tab').addEventListener('click', function() {
    document.getElementById('brands-tab').classList.add('active');
    document.getElementById('products-tab').classList.remove('active');
    document.getElementById('categories-tab').classList.remove('active');
    createBestSellingChart('brands');
  });
  
  document.getElementById('categories-tab').addEventListener('click', function() {
    document.getElementById('categories-tab').classList.add('active');
    document.getElementById('products-tab').classList.remove('active');
    document.getElementById('brands-tab').classList.remove('active');
    createBestSellingChart('categories');
  });
  
  // Initialize date filters
  initDateFilters();
});

// Initialize date pickers and filter button
function initDateFilters() {
  // Set default date range (last 30 days)
  const today = new Date();
  const thirtyDaysAgo = new Date();
  thirtyDaysAgo.setDate(today.getDate() - 30);
  
  document.getElementById('startDate').valueAsDate = thirtyDaysAgo;
  document.getElementById('endDate').valueAsDate = today;
  
  // Add event listener to filter button
  document.getElementById('filterBtn').addEventListener('click', function() {
    const startDate = document.getElementById('startDate').value;
    const endDate = document.getElementById('endDate').value;
    
    // Get active chart type
    let chartType = 'products';
    if (document.getElementById('brands-tab').classList.contains('active')) {
      chartType = 'brands';
    } else if (document.getElementById('categories-tab').classList.contains('active')) {
      chartType = 'categories';
    }
    
    createBestSellingChart(chartType, startDate, endDate);
  });
  
  // Add event listeners for preset periods
  document.getElementById('weekly-btn').addEventListener('click', function() {
    resetPeriodButtons();
    this.classList.add('active');
    const sevenDaysAgo = new Date();
    sevenDaysAgo.setDate(today.getDate() - 7);
    
    document.getElementById('startDate').valueAsDate = sevenDaysAgo;
    document.getElementById('endDate').valueAsDate = today;
    
    // Trigger filter click
    document.getElementById('filterBtn').click();
  });
  
  document.getElementById('monthly-btn').addEventListener('click', function() {
    resetPeriodButtons();
    this.classList.add('active');
    const thirtyDaysAgo = new Date();
    thirtyDaysAgo.setDate(today.getDate() - 30);
    
    document.getElementById('startDate').valueAsDate = thirtyDaysAgo;
    document.getElementById('endDate').valueAsDate = today;
    
    // Trigger filter click
    document.getElementById('filterBtn').click();
  });
  
  document.getElementById('yearly-btn').addEventListener('click', function() {
    resetPeriodButtons();
    this.classList.add('active');
    const oneYearAgo = new Date();
    oneYearAgo.setFullYear(today.getFullYear() - 1);
    
    document.getElementById('startDate').valueAsDate = oneYearAgo;
    document.getElementById('endDate').valueAsDate = today;
    
    // Trigger filter click
    document.getElementById('filterBtn').click();
  });
}

// Reset period buttons (remove active class)
function resetPeriodButtons() {
  const buttons = document.querySelectorAll('.period-btn');
  buttons.forEach(button => {
    button.classList.remove('active');
  });
}

// Main function to create best selling chart
function createBestSellingChart(type = 'products', startDate = null, endDate = null) {
  // Show loading spinner
  document.getElementById('chart-loading').style.display = 'flex';
  document.getElementById('best-selling-chart').style.opacity = '0.5';
  
  // Build URL with filters
  let url = `/admin/best-selling?type=${type}`;
  
  if (startDate && endDate) {
    url += `&startDate=${startDate}&endDate=${endDate}`;
  }
  
  // Fetch data from the server
  fetch(url)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      if (data.success) {
        renderBestSellingChart(data.data, type);
      } else {
        showError('Failed to load data: ' + data.message);
      }
    })
    .catch(error => {
      console.error('Error fetching best selling data:', error);
      showError('Failed to load data. Please try again later.');
    })
    .finally(() => {
      // Hide loading spinner
      document.getElementById('chart-loading').style.display = 'none';
      document.getElementById('best-selling-chart').style.opacity = '1';
    });
}

// Render the chart with ApexCharts
function renderBestSellingChart(data, type) {
  // Format the data for the chart
  let labels = [];
  let values = [];
  let colors = [
    '#FF9F43', '#1E88E5', '#43A047', '#E53935', '#5E35B1', 
    '#D81B60', '#FB8C00', '#039BE5', '#00897B', '#7CB342'
  ];
  
  if (type === 'products') {
    labels = data.map(item => truncateText(item.productName, 20));
    values = data.map(item => item.totalQuantity);
    document.getElementById('chart-title').textContent = 'Best Selling Products';
  } else if (type === 'brands') {
    labels = data.map(item => truncateText(item.brandName, 20));
    values = data.map(item => item.totalQuantity);
    document.getElementById('chart-title').textContent = 'Best Selling Brands';
  } else if (type === 'categories') {
    labels = data.map(item => truncateText(item.categoryName, 20));
    values = data.map(item => item.totalQuantity);
    document.getElementById('chart-title').textContent = 'Best Selling Categories';
  }
  
  // Update total units display
  const totalUnits = values.reduce((sum, current) => sum + current, 0);
  document.getElementById('total-units').textContent = totalUnits.toLocaleString();
  
  // Get the chart element
  const chartElement = document.getElementById('best-selling-chart');
  
  // Destroy existing chart if it exists
  if (window.bestSellingChart) {
    window.bestSellingChart.destroy();
  }
  
  // Create chart options
  const options = {
    series: [{
      name: 'Units Sold',
      data: values
    }],
    chart: {
      type: 'bar',
      height: 430,
      background: '#1e1e2d',
      foreColor: '#fff',
      toolbar: {
        show: false
      },
      animations: {
        enabled: true,
        easing: 'easeinout',
        speed: 800
      }
    },
    plotOptions: {
      bar: {
        horizontal: true,
        borderRadius: 6,
        dataLabels: {
          position: 'top'
        },
        distributed: true
      }
    },
    colors: colors,
    dataLabels: {
      enabled: true,
      formatter: function(val) {
        return val.toLocaleString();
      },
      offsetX: 20,
      style: {
        fontSize: '12px',
        colors: ['#fff'],
        fontWeight: 500
      }
    },
    xaxis: {
      categories: labels,
      labels: {
        style: {
          colors: Array(10).fill('#fff'),
          fontSize: '12px'
        }
      },
      axisBorder: {
        show: false
      },
      axisTicks: {
        show: false
      }
    },
    yaxis: {
      labels: {
        style: {
          colors: ['#fff']
        }
      }
    },
    grid: {
      borderColor: '#2b2b40',
      xaxis: {
        lines: {
          show: true
        }
      },
      yaxis: {
        lines: {
          show: false
        }
      },
      padding: {
        top: 0,
        right: 0,
        bottom: 0,
        left: 10
      }
    },
    tooltip: {
      theme: 'dark',
      y: {
        formatter: function(value) {
          return value.toLocaleString() + ' units';
        }
      }
    },
    legend: {
      show: false
    }
  };

  // Render the chart
  window.bestSellingChart = new ApexCharts(chartElement, options);
  window.bestSellingChart.render();
}

// Helper function to truncate text
function truncateText(text, maxLength) {
  if (text.length > maxLength) {
    return text.substring(0, maxLength) + '...';
  }
  return text;
}

// Show error message
function showError(message) {
  const errorDiv = document.getElementById('chart-error');
  errorDiv.textContent = message;
  errorDiv.style.display = 'block';
  
  // Hide after 5 seconds
  setTimeout(() => {
    errorDiv.style.display = 'none';
  }, 5000);
}

// Modify the backend API to include category data
// This is a client-side implementation, so we're adding this as a reference for how
// the server-side should be updated to support category data retrieval
/*
// Server-side code (for reference)
const getBestSellingCategories = async (dateQuery) => {
  return await Order.aggregate([
    { $match: dateQuery },
    { $unwind: "$products" },
    {
      $lookup: {
        from: "products",
        localField: "products.productId",
        foreignField: "_id",
        as: "productDetails"
      }
    },
    { $unwind: "$productDetails" },
    {
      $lookup: {
        from: "categories",
        localField: "productDetails.category",
        foreignField: "_id",
        as: "categoryDetails"
      }
    },
    { $unwind: "$categoryDetails" },
    {
      $group: {
        _id: "$categoryDetails._id",
        categoryName: { $first: "$categoryDetails.name" },
        totalQuantity: { $sum: "$products.quantity" },
        totalRevenue: { $sum: "$products.totalPrice" }
      }
    },
    {
      $project: {
        _id: 0,
        categoryId: "$_id",
        categoryName: 1,
        totalQuantity: 1,
        totalRevenue: 1
      }
    },
    { $sort: { totalQuantity: -1 } },
    { $limit: 10 }
  ]);
};
*/
                </script>
                <!-- Dashboard Js -->
                <script src="/assets/js/pages/dashboard.js"></script>

                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
                <!-- ApexCharts JS -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.0/apexcharts.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.0/apexcharts.min.js"></script>
                </body>
                
                
                <!-- Mirrored from techzaa.in/larkon/admin/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:42:46 GMT -->
                </html>