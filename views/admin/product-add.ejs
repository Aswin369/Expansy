<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/product-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Create Product | Larkon - Responsive Admin Dashboard Template</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="/assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="/assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" />

     <!-- Theme Config js (Require in all Page) -->
     <script src="/assets/js/config.js"></script>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.2.0/dist/css/coreui.min.css" rel="stylesheet" integrity="sha384-u3h5SFn5baVOWbh8UkOrAaLXttgSF0vXI15ODtCSxl0v/VKivnCN6iHCcvlyTL7L" crossorigin="anonymous">
    <style>
 
     .image-upload-section {
         border: 1px solid #dee2e6;
         padding: 15px;
         margin-bottom: 15px;
         border-radius: 5px;
     }

     .image-preview-container {
         display: none;
         margin-top: 15px;
     }

     .image-preview {
         display: block;
         max-width: 100%;
         max-height: 300px;
     }

     .preview-controls {
         margin-top: 15px;
         margin-bottom: 15px;
     }

     .final-image {
         display: none;
         max-width: 200px;
         max-height: 200px;
         margin-top: 15px;
         border: 1px solid #ddd;
         border-radius: 4px;
     }
 </style>

</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Create Product</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              <!-- Theme Color (Light/Dark) -->
                              <div class="topbar-item">
                                   <button type="button" class="topbar-button" id="light-dark-mode">
                                        <iconify-icon icon="solar:moon-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Notification -->
                              <div class="dropdown topbar-item">
                                   <button type="button" class="topbar-button position-relative" id="page-header-notifications-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <iconify-icon icon="solar:bell-bing-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                        <span class="position-absolute topbar-badge fs-10 translate-middle badge bg-danger rounded-pill">3<span class="visually-hidden">unread messages</span></span>
                                   </button>
                                   <div class="dropdown-menu py-0 dropdown-lg dropdown-menu-end" aria-labelledby="page-header-notifications-dropdown">
                                        <div class="p-3 border-top-0 border-start-0 border-end-0 border-dashed border">
                                             <div class="row align-items-center">
                                                  <div class="col">
                                                       <h6 class="m-0 fs-16 fw-semibold"> Notifications</h6>
                                                  </div>
                                                  <div class="col-auto">
                                                       <a href="javascript: void(0);" class="text-dark text-decoration-underline">
                                                            <small>Clear All</small>
                                                       </a>
                                                  </div>
                                             </div>
                                        </div>
                                        <div data-simplebar style="max-height: 280px;">
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom text-wrap">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-1.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-1" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0"><span class="fw-medium">Josephine Thompson </span>commented on admin panel <span>" Wow üòç! this admin looks good and awesome design"</span></p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-info text-info fs-20 rounded-circle">
                                                                      D
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Donoghue Susan</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Hi, How are you? What about our next meeting
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-3.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-3" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Jacob Gines</p>
                                                            <p class="mb-0 text-wrap">Answered to your comment on the cash flow forecast's graph üîî.</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-warning text-warning fs-20 rounded-circle">
                                                                      <iconify-icon icon="iconamoon:comment-dots-duotone"></iconify-icon>
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold text-wrap">You have received <b>20</b> new messages in the
                                                                 conversation</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-5.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-5" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Shawn Bunch</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Commented on Admin
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                        </div>
                                        <div class="text-center py-3">
                                             <a href="javascript:void(0);" class="btn btn-primary btn-sm">View All Notification <i class="bx bx-right-arrow-alt ms-1"></i></a>
                                        </div>
                                   </div>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-settings-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:settings-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Activity -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-activity-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:clock-circle-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- User -->
                              
                         </div>
                    </div>
               </div>
          </header>

          <!-- Activity Timeline -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-activity-offcanvas" style="max-width: 450px; width: 100%;">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0 fw-semibold">Activity Stream</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100 p-4">
                              <div class="position-relative ms-2">
                                   <span class="position-absolute start-0  top-0 border border-dashed h-100"></span>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-danger d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:folder-check-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Report-Fix / Update </h5>
                                                  <p class="d-flex align-items-center">Add 3 files to <span class=" d-flex align-items-center text-primary ms-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Tasks</span></p>
                                                  <div class="bg-light bg-opacity-50 rounded-2 p-2">
                                                       <div class="row">
                                                            <div class="col-lg-6 border-end border-light">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-figma fs-20 text-red"></i>
                                                                      <a href="#!" class="text-dark fw-medium">Concept.fig</a>
                                                                 </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-file-doc fs-20 text-success"></i>
                                                                      <a href="#!" class="text-dark fw-medium">larkon.docs</a>
                                                                 </div>
                                                            </div>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-2 text-muted">Monday , 4:24 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-success d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:check-circle-1-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Project Status
                                                  </h5>
                                                  <p class="d-flex align-items-center mb-0">Marked<span class=" d-flex align-items-center text-primary mx-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Design </span> as <span class="badge bg-success-subtle text-success px-2 py-1 ms-1"> Completed</span></p>
                                                  <div class="d-flex align-items-center gap-3 mt-1 bg-light bg-opacity-50 p-2 rounded-2">
                                                       <a href="#!" class="fw-medium text-dark">UI/UX Figma Design</a>
                                                       <div class="ms-auto">
                                                            <a href="#!" class="fw-medium text-primary fs-18" data-bs-toggle="tooltip" data-bs-title="Download" data-bs-placement="bottom"><iconify-icon icon="iconamoon:cloud-download-duotone"></iconify-icon></a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 3:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-primary d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-16">UI</span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15">Larkon Application UI v2.0.0 <span class="badge bg-primary-subtle text-primary px-2 py-1 ms-1"> Latest</span>
                                                  </h5>
                                                  <p>Get access to over 20+ pages including a dashboard layout, charts, kanban board, calendar, and pre-order E-commerce & Marketing pages.</p>
                                                  <div class="mt-2">
                                                       <a href="#!" class="btn btn-light btn-sm">Download Zip</a>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 2:10 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-7.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Alex Smith Attached Photos
                                                  </h5>
                                                  <div class="row g-2 mt-2">
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-6.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-3.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-4.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday 1:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-6.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Rebecca J. added a new team member
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1"><iconify-icon icon="iconamoon:check-circle-1-duotone" class="text-success"></iconify-icon> Added a new member to Front Dashboard</p>
                                                  <h6 class="mt-3 text-muted">Monday 10:00 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-warning d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:certificate-badge-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Achievements
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1 mt-1">Earned a <iconify-icon icon="iconamoon:certificate-badge-duotone" class="text-danger fs-20"></iconify-icon>" Best Product Award"</p>
                                                  <h6 class="mt-3 text-muted">Monday 9:30 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <a href="#!" class="btn btn-outline-dark w-100">View All</a>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->
          <%-include("../../views/partials/admin/nav")%>
          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div class="page-content">

               <!-- Start Container Fluid -->
               <div class="container-xxl">
                <div class="row">
                    <div class="col-xl-9 col-lg-8">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Add Product</h4>
                            </div>
                            <div class="card-body">  
                                <form  enctype="multipart/form-data" id="myForm">     
                                    <!-- Basic Product Information -->
                                    <div class="row mb-3">
                                        <div class="col-lg-6">
                                            <label for="product-name" class="form-label">Product Name</label>
                                            <input type="text" id="product-name" name="productName" class="form-control" placeholder="Enter product name" >
                                        </div>
                                        <div class="col-lg-6">
                                            <label for="product-categories" class="form-label">Category</label>
                                            <select class="form-control" id="product-categories" name="category" >
                                                 <option value="">Select Category</option>
                                                <%for(let i=0; i<category.length; i++){%>
                                                       <option value="<%=category[i]._id%>">
                                                            <%=category[i].name%>
                                                       </option>
                                                  <%}%>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-lg-6">
                                            <label for="brand" class="form-label">Brand</label>
                                            <select class="form-control" id="brand" name="brand" >
                                                 <option value="">Select Brand</option>
                                                <%for(let i=0; i<brand.length;i++){%>
                                                  <option value="<%= brand[i]._id%>">
                                                       <%=brand[i].brandName%>
                                                  </option>
                                                  <%}%>
                                            </select>
                                        </div>
                                        <div class="col-lg-6">
                                             <label for="regular-price" class="form-label">Battery</label>
                                             <div class="input-group">
                                                 <input type="text" id="battery" name="regularPrice" class="form-control">
                                             </div>
                                         </div>
                                    </div>
            
                                    <!-- Price Information -->
                                    <div class="row mb-3">
                                        <div class="col-lg-6">
                                            <label for="regular-price" class="form-label">Processor</label>
                                            <div class="input-group">
                                                <input type="text" id="Processor" name="regularPrice" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <label for="sale-price" class="form-label">Display Size</label>
                                            <div class="input-group">
                                                <input type="text" id="displaySize" name="salePrice" class="form-control">
                                            </div>
                                        </div>
                                    </div>
            
                                    <!-- Product Description -->
                                    <div class="mb-3">
                                        <label for="description" class="form-label">Product Description</label>
                                        <textarea class="form-control" id="description" name="description" rows="4" placeholder="Enter product description" ></textarea>
                                    </div>
            
                                    <!-- Specifications -->
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h5>Specifications</h5>
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#variantModal">
                                            Add Stocks
                                        </button>
                                    </div>
                                
                                    <!-- Variants Display Section -->
                                    <div id="variants-container" class="mb-4">
                                        <!-- Variants will be displayed here -->
                                    </div>
                                    
                                    <div style="margin: 5%;"></div>
                                    <!-- Product Images -->
                                    <div class="container mt-4">
                                        <h5 class="mb-3">Product Images</h5>
                                        <div class="row mb-3">
                                            <div class="col-lg-4 image-upload-section">
                                                <label for="product-image-1" class="form-label">Product Image 1</label>
                                                <input type="file" class="form-control image-input" id="product-image-1" name="product-image-1" accept="image/*" >
                                                <div class="image-preview-container" id="preview-container-1">
                                                    <img class="image-preview" id="preview-1">
                                                    <div class="preview-controls" id="controls-1">
                                                        <button type="button" class="btn btn-primary crop-btn" data-index="1">Crop & Save</button>
                                                        <button type="button" class="btn btn-secondary cancel-btn" data-index="1">Cancel</button>
                                                    </div>
                                                </div>
                                                <img class="final-image" id="final-1">
                                                <input type="hidden" name="cropped-image-1" id="cropped-image-1">
                                            </div>
                                    
                                            <div class="col-lg-4 image-upload-section">
                                                <label for="product-image-2" class="form-label">Product Image 2</label>
                                                <input type="file" class="form-control image-input" id="product-image-2" name="product-image-2" accept="image/*" disabled>
                                                <div class="image-preview-container" id="preview-container-2">
                                                    <img class="image-preview" id="preview-2">
                                                    <div class="preview-controls" id="controls-2">
                                                        <button type="button" class="btn btn-primary crop-btn" data-index="2">Crop & Save</button>
                                                        <button type="button" class="btn btn-secondary cancel-btn" data-index="2">Cancel</button>
                                                    </div>
                                                </div>
                                                <img class="final-image" id="final-2">
                                                <input type="hidden" name="cropped-image-2" id="cropped-image-2">
                                            </div>
                                    
                                            <div class="col-lg-4 image-upload-section">
                                                <label for="product-image-3" class="form-label">Product Image 3</label>
                                                <input type="file" class="form-control image-input" id="product-image-3" name="product-image-3" accept="image/*" disabled>
                                                <div class="image-preview-container" id="preview-container-3">
                                                    <img class="image-preview" id="preview-3">
                                                    <div class="preview-controls" id="controls-3">
                                                        <!-- Fixed data-index value for the third image -->
                                                        <button type="button" class="btn btn-primary crop-btn" data-index="3">Crop & Save</button>
                                                        <button type="button" class="btn btn-secondary cancel-btn" data-index="3">Cancel</button>
                                                    </div>
                                                </div>
                                                <img class="final-image" id="final-3">
                                                <input type="hidden" name="cropped-image-3" id="cropped-image-3">
                                            </div>
                                        </div>
                                    </div>
                                
            
                                    <!-- Form Actions -->
                                    <div class="row justify-content-end g-2">
                                        <div class="col-lg-2">
                                            <button type="submit"  class="btn btn-primary w-100">Create Product</button>
                                        </div>
                                        <div class="col-lg-2">
                                            <button type="reset" class="btn btn-outline-secondary w-100">
                                             <a href="/admin/products" class="" style="text-decoration: none;">Cancel</a>
                                            </button>
                                        </div>
                                    </div>
                                </form>

                                <div class="modal fade" id="variantModal" tabindex="-1" aria-labelledby="variantModalLabel" aria-hidden="true">
                                   <div class="modal-dialog">
                                       <div class="modal-content">
                                           <div class="modal-header">
                                               <h5 class="modal-title" id="variantModalLabel">Add Product Variant</h5>
                                               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                           </div>
                                           <div class="modal-body">
                                               <div class="mb-3">
                                                   <label for="modal-ram" class="form-label">RAM</label>
                                                   <select class="form-control" id="modal-ram">
                                                       <option value="">Select RAM</option>
                                                       <% for (let i = 0; i < ram.length; i++) { %>
                                                           <option value="<%= ram[i]._id %>"><%= ram[i].value %></option>
                                                       <% } %>
                                                   </select>
                                               </div>
                                               <div class="mb-3">
                                                   <label for="modal-storage" class="form-label">Internal Storage</label>
                                                   <select class="form-control" id="modal-storage">
                                                       <option value="">Select Storage</option>
                                                       <%for(let i=0; i<storage.length; i++){%>
                                                           <option value="<%= storage[i]._id %>"><%= storage[i].value%></option>
                                                       <%}%>
                                                   </select>
                                               </div>
                                               <div class="mb-3">
                                                   <label for="modal-color" class="form-label">Color</label>
                                                   <select class="form-control" id="modal-color">
                                                       <option value="">Select Color</option>
                                                       <%for(let i=0; i<color.length; i++){%>
                                                            <option value="<%= color[i]._id%>"><%= color[i].value%></option>
                                                            <%}%>
                                                   </select>
                                               </div>
                                               <div class="mb-3">
                                                   <label for="modal-quantity" class="form-label">Stock Quantity</label>
                                                   <input type="number" class="form-control" id="modal-quantity" min="0">
                                               </div>
                                               <div class="mb-3">
                                                   <label for="modal-quantity" class="form-label">Regular Price</label>
                                                   <input type="number" class="form-control" id="modal-RegularPrice" min="0">
                                               </div>
                                               <div class="mb-3">
                                                   <label for="modal-quantity" class="form-label">Sale Price</label>
                                                   <input type="number" class="form-control" id="modal-SalePrice" min="0">
                                               </div>
                                           </div>
                                           <div class="modal-footer">
                                               <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                               <button type="button" class="btn btn-primary" id="add-variant-btn">Add Variant</button>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
               <!-- End Container Fluid -->

               <!-- ========== Footer Start ========== -->
               
               <!-- ========== Footer End ========== -->

          </div>
          <!-- ==================================================== -->
          <!-- End Page Content -->
          <!-- ==================================================== -->


     </div>
     <!-- END Wrapper -->

     <!-- Vendor Javascript (Require in all Page) -->
     <script src="/assets/js/vendor.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <!-- App Javascript (Require in all Page) -->
     <script src="/assets/js/app.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.2.0/dist/js/coreui.bundle.min.js" integrity="sha384-JdRP5GRWP6APhoVS1OM/pOKMWe7q9q8hpl+J2nhCfVJKoS+yzGtELC5REIYKrymn" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
     <script>
        document.addEventListener('DOMContentLoaded', function() {
    let currentCropper = null;
    let croppedImages = [];
    let variants = [];

    // Prevent 'e' input in number fields
    document.querySelectorAll('input[type="number"]').forEach(input => {
        input.addEventListener('keydown', (e) => {
            if (e.key === 'e' || e.key === 'E' || e.key === '+' || e.key === '-') {
                e.preventDefault();
            }
        });
    });
    
    // Set accept attribute for image inputs
    document.querySelectorAll('.image-input').forEach(input => {
        input.setAttribute('accept', '.jpg,.jpeg,.png');
    });

    // Form submission handler
    document.getElementById("myForm").addEventListener("submit", (event) => {
        event.preventDefault();
        validateForm();
    });

    // Variant validation function
    function validateVariantInputs() {
        const ram = document.getElementById('modal-ram');
        const storage = document.getElementById('modal-storage');
        const color = document.getElementById('modal-color');
        const quantity = document.getElementById('modal-quantity');
        const regularPrice = document.getElementById('modal-RegularPrice');
        const salePrice = document.getElementById('modal-SalePrice');

        // Check if all fields are filled
        if (!ram.value || !storage.value || !color.value || !quantity.value || !regularPrice.value) {
            Swal.fire({
                icon: 'error',
                title: 'Validation Error',
                text: 'Please fill in all required fields!'
            });
            return false;
        }

        // Validate quantity
        if (parseInt(quantity.value) <= 0 || !Number.isInteger(Number(quantity.value))) {
            Swal.fire({
                icon: 'error',
                title: 'Validation Error',
                text: 'Quantity must be a positive whole number!'
            });
            return false;
        }

        // Validate regular price
        if (parseFloat(regularPrice.value) <= 0) {
            Swal.fire({
                icon: 'error',
                title: 'Validation Error',
                text: 'Regular price must be greater than zero!'
            });
            return false;
        }

        // Validate sale price if provided
        if (salePrice.value) {
            if (parseFloat(salePrice.value) <= 0) {
                Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Sale price must be greater than zero!'
                });
                return false;
            }

            if (parseFloat(salePrice.value) >= parseFloat(regularPrice.value)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Sale price must be less than regular price!'
                });
                return false;
            }
        }

        return true;
    }

    // Get variant data from modal
    function getVariantFromModal() {
        const ram = document.getElementById('modal-ram');
        const storage = document.getElementById('modal-storage');
        const color = document.getElementById('modal-color');
        const quantity = document.getElementById('modal-quantity');
        const regularPrice = document.getElementById("modal-RegularPrice");
        const salePrice = document.getElementById("modal-SalePrice");

        return {
            ram: {
                id: ram.value,
                text: ram.options[ram.selectedIndex].text
            },
            storage: {
                id: storage.value,
                text: storage.options[storage.selectedIndex].text
            },
            color: {
                id: color.value,
                text: color.options[color.selectedIndex].text
            },
            quantity: parseInt(quantity.value),
            regularPrice: parseFloat(regularPrice.value),
            salePrice: salePrice.value ? parseFloat(salePrice.value) : null
        };
    }

    // Display variants in table
    function displayVariants() {
        const container = document.getElementById('variants-container');
        container.innerHTML = '';

        if (variants.length === 0) {
            container.innerHTML = '<p class="text-muted">No variants added yet</p>';
            return;
        }

        const table = document.createElement('table');
        table.className = 'table table-bordered';
        table.innerHTML = `
            <thead>
                <tr>
                    <th>RAM</th>
                    <th>Storage</th>
                    <th>Color</th>
                    <th>Quantity</th>
                    <th>Regular Price</th>
                    <th>Sale Price</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                ${variants.map(variant => `
                    <tr data-variant-id="${variant.id}">
                        <td>${variant.ram.text}</td>
                        <td>${variant.storage.text}</td>
                        <td>${variant.color.text}</td>
                        <td>${variant.quantity}</td>
                        <td>${variant.regularPrice}</td>
                        <td>${variant.salePrice || '-'}</td>
                        <td>
                            <button class="btn btn-danger btn-sm delete-variant" data-variant-id="${variant.id}">
                                Delete
                            </button>
                        </td>
                    </tr>
                `).join('')}
            </tbody>
        `;

        container.appendChild(table);

        // Add hidden input for variants data
        const variantsInput = document.createElement('input');
        variantsInput.type = 'hidden';
        variantsInput.name = 'variants';
        variantsInput.value = JSON.stringify(variants);
        container.appendChild(variantsInput);
    }

    // Form validation function
    async function validateForm() {
        const productName = document.getElementById('product-name').value.trim();
        const description = document.getElementById('description').value.trim();
        const processor = document.getElementById('Processor').value.trim();
        const brand = document.getElementById('brand').value;
        const category = document.getElementById('product-categories').value;
        const battery = document.getElementById('battery').value.trim();
        const displaySize = document.getElementById('displaySize').value.trim();
        
        try {
            // Basic validation checks
            if (!productName) {
                await Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Product name cannot be empty!'
                });
                return false;
            }

            if (!description || !processor || !brand || !category || !battery || !displaySize) {
                await Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Please fill in all required fields!'
                });
                return false;
            }

            // Validate variants
            if (variants.length === 0) {
                await Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Please add at least one variant!'
                });
                return false;
            }

            // Validate if at least one image is cropped
            const croppedImage1 = document.getElementById('cropped-image-1').value;
            if (!croppedImage1) {
                await Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Please upload and crop at least one product image!'
                });
                return false;
            }

            // Create FormData
            const formData = new FormData();

            // Add all form fields to FormData
            formData.append('productName', productName);
            formData.append('description', description);
            formData.append('processor', processor);
            formData.append('brand', brand);
            formData.append('productCategories', category);
            formData.append('battery', battery);
            formData.append('displaySize', displaySize);
            formData.append('variants', JSON.stringify(variants));
            
            console.log("This is my variant",variants)

            // Handle cropped images
            for (let i = 1; i <= 3; i++) {
                const croppedImage = document.getElementById(`cropped-image-${i}`).value;
                if (croppedImage) {
                    const blob = await fetch(croppedImage).then(r => r.blob());
                    formData.append('file', blob, `image${i}.jpg`);
                }
            }
            
            const response = await fetch('/admin/addProducts', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                await Swal.fire({
                    icon: 'success',
                    title: 'Success',
                    text: 'Product added successfully!',
                    showConfirmButton: false,
                    timer: 1500
                });
                window.location.href = '/admin/products';
            } else {
                throw new Error('Server responded with an error');
            }
        } catch (error) {
            console.error('Error:', error);
            await Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'There was an error adding the product. Please try again.'
            });
        }
    }

    // Add variant button handler
    document.getElementById('add-variant-btn').addEventListener('click', () => {
        if (!validateVariantInputs()) {
            return;
        }

        const variant = getVariantFromModal();
        variants.push(variant);
        displayVariants();

        // Reset modal and close it
        document.getElementById('modal-ram').value = '';
        document.getElementById('modal-storage').value = '';
        document.getElementById('modal-color').value = '';
        document.getElementById('modal-RegularPrice').value = '';
        document.getElementById('modal-SalePrice').value = '';
        document.getElementById('modal-quantity').value = '';
        bootstrap.Modal.getInstance(document.getElementById('variantModal')).hide();
    });

    // Delete variant handler
    document.getElementById('variants-container').addEventListener('click', (e) => {
        if (e.target.classList.contains('delete-variant')) {
            const variantId = parseInt(e.target.dataset.variantId);
            variants = variants.filter(v => v.id !== variantId);
            displayVariants();
        }
    });

    // Image handling code
    document.querySelectorAll('.image-input').forEach(input => {
        input.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            // Image type validation
            const allowedTypes = ['image/jpeg', 'image/png'];
            if (!allowedTypes.includes(file.type)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid File Type',
                    text: 'Please upload only .jpg, .jpeg, or .png image files.'
                });
                this.value = '';
                return;
            }

            // File size validation (max 5MB)
            const maxSizeInBytes = 5 * 1024 * 1024;
            if (file.size > maxSizeInBytes) {
                Swal.fire({
                    icon: 'error',
                    title: 'File Too Large',
                    text: 'Image size must be less than 5MB.'
                });
                this.value = '';
                return;
            }

            const index = this.id.split('-')[2];
            const previewContainer = document.getElementById(`preview-container-${index}`);
            const preview = document.getElementById(`preview-${index}`);
            const finalImage = document.getElementById(`final-${index}`);

            if (preview.cropper) {
                preview.cropper.destroy();
                preview.cropper = null;
            }

            finalImage.style.display = 'none';
            
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
                previewContainer.style.display = 'block';

                preview.cropper = new Cropper(preview, {
                    aspectRatio: 1,
                    viewMode: 2,
                    dragMode: 'move',
                    autoCropArea: 1,
                    restore: false,
                    guides: true,
                    center: true,
                    highlight: false,
                    cropBoxMovable: true,
                    cropBoxResizable: true,
                    toggleDragModeOnDblclick: false
                });
            };
            reader.readAsDataURL(file);
        });
    });

    // Crop button handlers
    document.querySelectorAll('.crop-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const index = this.dataset.index;
            const preview = document.getElementById(`preview-${index}`);
            
            if (!preview.cropper) return;

            const previewContainer = document.getElementById(`preview-container-${index}`);
            const finalImage = document.getElementById(`final-${index}`);
            const croppedInput = document.getElementById(`cropped-image-${index}`);

            const canvas = preview.cropper.getCroppedCanvas({
                width: 600,
                height: 600
            });

            const croppedData = canvas.toDataURL('image/jpeg', 0.9);
            finalImage.src = croppedData;
            finalImage.style.display = 'block';
            croppedInput.value = croppedData;

            preview.cropper.destroy();
            preview.cropper = null;
            previewContainer.style.display = 'none';

            if (index < 3) {
                const nextInput = document.getElementById(`product-image-${parseInt(index) + 1}`);
                if (nextInput) {
                    nextInput.disabled = false;
                }
            }
        });
    });

    // Cancel button handlers
    document.querySelectorAll('.cancel-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const index = this.dataset.index;
            const input = document.getElementById(`product-image-${index}`);
            const preview = document.getElementById(`preview-${index}`);
            const previewContainer = document.getElementById(`preview-container-${index}`);
            const finalImage = document.getElementById(`final-${index}`);
            const croppedInput = document.getElementById(`cropped-image-${index}`);

            if (preview.cropper) {
                preview.cropper.destroy();
                preview.cropper = null;
            }

            input.value = '';
            previewContainer.style.display = 'none';
            finalImage.style.display = 'none';
            croppedInput.value = '';
        });
    });

    // Initialize variants display
    displayVariants();
});
      </script>

</body>


<!-- Mirrored from techzaa.in/larkon/admin/product-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
</html>