<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/product-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Create Product | Larkon - Responsive Admin Dashboard Template</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="/assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="/assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" />
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.css">
     <style>
        .image-upload-section {
    margin-bottom: 20px;
}
.product-image-editor {
    max-width: 800px;
    margin: 0 auto;
}

.image-preview-circle {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    overflow: hidden;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #ddd;
}

.preview-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.crop-btn {
    min-width: 200px;
    text-align: left;
    background: transparent;
    border: 1px solid #333;
    padding: 8px 15px;
}

.file-input-section {
    background: rgba(0, 0, 0, 0.03);
    padding: 20px;
    border-radius: 4px;
}

.custom-file-input input {
    background: transparent;
    border: 1px solid #333;
}

.image-preview-container {
    display: none;
    margin-top: 10px;
    max-width: 100%;
    position: relative;
}

.image-preview {
    max-width: 100%;
    height: auto;
}

.preview-controls {
    margin-top: 10px;
    display: flex;
    gap: 10px;
}

.final-image {
    display: none;
    max-width: 100%;
    height: auto;
    margin-top: 10px;
    border: 2px solid #ddd;
    border-radius: 4px;
}

.cropper-container {
    max-width: 100%;
}
     </style>

     <!-- Theme Config js (Require in all Page) -->
     <script src="/assets/js/config.js"></script>
</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Create Product</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              <!-- Theme Color (Light/Dark) -->
                              <div class="topbar-item">
                                   <button type="button" class="topbar-button" id="light-dark-mode">
                                        <iconify-icon icon="solar:moon-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Notification -->
                              <div class="dropdown topbar-item">
                                   <button type="button" class="topbar-button position-relative" id="page-header-notifications-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <iconify-icon icon="solar:bell-bing-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                        <span class="position-absolute topbar-badge fs-10 translate-middle badge bg-danger rounded-pill">3<span class="visually-hidden">unread messages</span></span>
                                   </button>
                                   <div class="dropdown-menu py-0 dropdown-lg dropdown-menu-end" aria-labelledby="page-header-notifications-dropdown">
                                        <div class="p-3 border-top-0 border-start-0 border-end-0 border-dashed border">
                                             <div class="row align-items-center">
                                                  <div class="col">
                                                       <h6 class="m-0 fs-16 fw-semibold"> Notifications</h6>
                                                  </div>
                                                  <div class="col-auto">
                                                       <a href="javascript: void(0);" class="text-dark text-decoration-underline">
                                                            <small>Clear All</small>
                                                       </a>
                                                  </div>
                                             </div>
                                        </div>
                                        <div data-simplebar style="max-height: 280px;">
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom text-wrap">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-1.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-1" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0"><span class="fw-medium">Josephine Thompson </span>commented on admin panel <span>" Wow üòç! this admin looks good and awesome design"</span></p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-info text-info fs-20 rounded-circle">
                                                                      D
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Donoghue Susan</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Hi, How are you? What about our next meeting
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-3.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-3" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Jacob Gines</p>
                                                            <p class="mb-0 text-wrap">Answered to your comment on the cash flow forecast's graph üîî.</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-warning text-warning fs-20 rounded-circle">
                                                                      <iconify-icon icon="iconamoon:comment-dots-duotone"></iconify-icon>
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold text-wrap">You have received <b>20</b> new messages in the
                                                                 conversation</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-5.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-5" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Shawn Bunch</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Commented on Admin
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                        </div>
                                        <div class="text-center py-3">
                                             <a href="javascript:void(0);" class="btn btn-primary btn-sm">View All Notification <i class="bx bx-right-arrow-alt ms-1"></i></a>
                                        </div>
                                   </div>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-settings-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:settings-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Activity -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-activity-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:clock-circle-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- User -->
                              <div class="dropdown topbar-item">
                                   <a type="button" class="topbar-button" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="d-flex align-items-center">
                                             <img class="rounded-circle" width="32" src="/assets/images/users/avatar-1.jpg" alt="avatar-3">
                                        </span>
                                   </a>
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <h6 class="dropdown-header">Welcome Gaston!</h6>
                                        <a class="dropdown-item" href="pages-profile.html">
                                             <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Profile</span>
                                        </a>
                                        <a class="dropdown-item" href="apps-chat.html">
                                             <i class="bx bx-message-dots text-muted fs-18 align-middle me-1"></i><span class="align-middle">Messages</span>
                                        </a>

                                        <a class="dropdown-item" href="pages-pricing.html">
                                             <i class="bx bx-wallet text-muted fs-18 align-middle me-1"></i><span class="align-middle">Pricing</span>
                                        </a>
                                        <a class="dropdown-item" href="pages-faqs.html">
                                             <i class="bx bx-help-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Help</span>
                                        </a>
                                        <a class="dropdown-item" href="auth-lock-screen.html">
                                             <i class="bx bx-lock text-muted fs-18 align-middle me-1"></i><span class="align-middle">Lock screen</span>
                                        </a>

                                        <div class="dropdown-divider my-1"></div>

                                        <a class="dropdown-item text-danger" href="auth-signin.html">
                                             <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle">Logout</span>
                                        </a>
                                   </div>
                              </div>

                              <!-- App Search-->
                              <form class="app-search d-none d-md-block ms-2">
                                   <div class="position-relative">
                                        <input type="search" class="form-control" placeholder="Search..." autocomplete="off" value="">
                                        <iconify-icon icon="solar:magnifer-linear" class="search-widget-icon"></iconify-icon>
                                   </div>
                              </form>
                         </div>
                    </div>
               </div>
          </header>

          <!-- Activity Timeline -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-activity-offcanvas" style="max-width: 450px; width: 100%;">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0 fw-semibold">Activity Stream</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100 p-4">
                              <div class="position-relative ms-2">
                                   <span class="position-absolute start-0  top-0 border border-dashed h-100"></span>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-danger d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:folder-check-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Report-Fix / Update </h5>
                                                  <p class="d-flex align-items-center">Add 3 files to <span class=" d-flex align-items-center text-primary ms-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Tasks</span></p>
                                                  <div class="bg-light bg-opacity-50 rounded-2 p-2">
                                                       <div class="row">
                                                            <div class="col-lg-6 border-end border-light">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-figma fs-20 text-red"></i>
                                                                      <a href="#!" class="text-dark fw-medium">Concept.fig</a>
                                                                 </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-file-doc fs-20 text-success"></i>
                                                                      <a href="#!" class="text-dark fw-medium">larkon.docs</a>
                                                                 </div>
                                                            </div>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-2 text-muted">Monday , 4:24 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-success d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:check-circle-1-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Project Status
                                                  </h5>
                                                  <p class="d-flex align-items-center mb-0">Marked<span class=" d-flex align-items-center text-primary mx-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Design </span> as <span class="badge bg-success-subtle text-success px-2 py-1 ms-1"> Completed</span></p>
                                                  <div class="d-flex align-items-center gap-3 mt-1 bg-light bg-opacity-50 p-2 rounded-2">
                                                       <a href="#!" class="fw-medium text-dark">UI/UX Figma Design</a>
                                                       <div class="ms-auto">
                                                            <a href="#!" class="fw-medium text-primary fs-18" data-bs-toggle="tooltip" data-bs-title="Download" data-bs-placement="bottom"><iconify-icon icon="iconamoon:cloud-download-duotone"></iconify-icon></a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 3:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-primary d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-16">UI</span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15">Larkon Application UI v2.0.0 <span class="badge bg-primary-subtle text-primary px-2 py-1 ms-1"> Latest</span>
                                                  </h5>
                                                  <p>Get access to over 20+ pages including a dashboard layout, charts, kanban board, calendar, and pre-order E-commerce & Marketing pages.</p>
                                                  <div class="mt-2">
                                                       <a href="#!" class="btn btn-light btn-sm">Download Zip</a>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 2:10 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-7.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Alex Smith Attached Photos
                                                  </h5>
                                                  <div class="row g-2 mt-2">
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-6.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-3.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-4.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday 1:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-6.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Rebecca J. added a new team member
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1"><iconify-icon icon="iconamoon:check-circle-1-duotone" class="text-success"></iconify-icon> Added a new member to Front Dashboard</p>
                                                  <h6 class="mt-3 text-muted">Monday 10:00 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-warning d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:certificate-badge-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Achievements
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1 mt-1">Earned a <iconify-icon icon="iconamoon:certificate-badge-duotone" class="text-danger fs-20"></iconify-icon>" Best Product Award"</p>
                                                  <h6 class="mt-3 text-muted">Monday 9:30 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <a href="#!" class="btn btn-outline-dark w-100">View All</a>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->
          <%-include("../../views/partials/admin/nav")%>
          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div class="page-content">

               <!-- Start Container Fluid -->
               <div class="container-xxl">
                <div class="row">
                    <div class="col-xl-9 col-lg-8">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Add Product</h4>
                            </div>
                            <div class="card-body">
                              <form id="productForm" action="/admin/editProduct/<%=product._id%>" method="put" enctype="multipart/form-data">
                                   <input type="hidden" id="productId" value="<%= product._id %>">

                                   <!-- Basic Product Information -->
                                   <div class="row mb-3">
                                       <div class="col-lg-6">
                                           <label for="product-name" class="form-label">Product Name</label>
                                           <input type="text" id="name" value="<%=product.productName%>" name="productName" class="form-control" placeholder="Enter product name" >
                                       </div>
                                       <div class="col-lg-6">
                                            <label for="product-categories" class="form-label">Category</label>
                                            <select class="form-control" id="category" name="category">
                                                 <% let selectedCategory = category.find(c => c._id.toString() === product.category.toString()); %>
                                                 <option value="<%= product.category %>" selected>
                                                     <%= selectedCategory ? selectedCategory.name : "Select Category" %>
                                                 </option>
                                                 <% for(let i = 0; i < category.length; i++) { %>
                                                     <% if (category[i]._id.toString() !== product.category.toString()) { %>
                                                         <option value="<%= category[i]._id %>"><%= category[i].name %></option>
                                                     <% } %>
                                                 <% } %>
                                             </select>
                                             
                                        </div>
                                   </div>

                                   <div class="row mb-3">
                                       <div class="col-lg-6">
                                            <label for="brand" class="form-label">Brand</label>
                                            <select class="form-control" id="brand" name="brand">
                                                 <% let selectedBrand = brand.find(b => b._id.toString() === product.brand.toString()); %>
                                                 <option value="<%= product.brand %>" selected><%= selectedBrand ? selectedBrand.brandName : 'Unknown Brand' %></option>
                                             
                                                 <% for(let i = 0; i < brand.length; i++) { %>
                                                     <% if (brand[i]._id.toString() !== product.brand.toString()) { %>
                                                         <option value="<%= brand[i]._id %>"><%= brand[i].brandName %></option>
                                                     <% } %>
                                                 <% } %>
                                             </select>
                                        </div>
                                       <div class="col-lg-6">
                                           <label for="quantity" class="form-label">Quantity</label>
                                           <input type="number" value="<%=product.quantity%>" id="quantity" name="quantity" class="form-control" placeholder="Enter quantity" >
                                       </div>
                                   </div>
           
                                   <!-- Price Information -->
                                   <div class="row mb-3">
                                       <div class="col-lg-6">
                                           <label for="regular-price" class="form-label">Regular Price</label>
                                           <div class="input-group">
                                               <span class="input-group-text"><i class='bx bx-dollar'></i></span>
                                               <input type="number" value="<%=product.regularPrice%>" id="regularPrice" name="regularPrice" class="form-control" placeholder="0.00" >
                                           </div>
                                       </div>
                                       <div class="col-lg-6">
                                           <label for="sale-price" class="form-label">Sale Price</label>
                                           <div class="input-group">
                                               <span class="input-group-text"><i class='bx bx-dollar'></i></span>
                                               <input value="<%=product.salePrice%>" type="number" id="salePrice" name="salePrice" class="form-control" placeholder="0.00">
                                           </div>
                                       </div>
                                   </div>
           
                                   <!-- Product Description -->
                                   <div class="mb-3">
                                       <label for="description" class="form-label">Product Description</label>
                                       <textarea class="form-control" id="description" name="description" rows="4" placeholder="Enter product description" value="<%=product.description%>" ><%=product.description%></textarea>
                                   </div>
           
                                   <!-- Specifications -->
                                   <h5 class="mb-3">Specifications</h5>
                                   <div class="row mb-3">
                                       <div class="col-lg-4">
                                           <label for="ram" class="form-label">RAM</label>
                                           <select class="form-control" id="RAM" name="ram" >
                                               <option value="<%=product.ram%>"><%=product.ram%></option>
                                               <option value="4GB">4GB</option>
                                               <option value="8GB">8GB</option>
                                               <option value="16GB">16GB</option>
                                               <option value="32GB">32GB</option>
                                           </select>
                                       </div>
                                       <div class="col-lg-4">
                                           <label for="storage" class="form-label">Internal Storage</label>
                                           <select class="form-control" id="storage" name="storage" >
                                               <option value="<%=product.storage%>"><%=product.storage%></option>
                                               <option value="64GB">64GB</option>
                                               <option value="128GB">128GB</option>
                                               <option value="256GB">256GB</option>
                                               <option value="512GB">512GB</option>
                                               <option value="1TB">1TB</option>
                                           </select>
                                       </div>
                                       <div class="col-lg-4">
                                           <label for="processor" class="form-label">Processor</label>
                                           <input type="text" id="processor" value="<%=product.processor%>" name="processor" class="form-control" placeholder="Enter processor details" >
                                       </div>
                                   </div>
                                   <div class="col-lg-4">
                                       <label for="color" class="form-label">Choose Color</label>
                                       <select class="form-control" id="color" name="color" >
                                           <option value="<%=product.color%>"><%=product.color%></option>
                                           <option value="Red" style="background-color: red; color: white;">Red</option>
                                           <option value="Blue" style="background-color: blue; color: white;">Blue</option>
                                           <option value="Green" style="background-color: green; color: white;">Green</option>
                                           <option value="Black" style="background-color: black; color: white;">Black</option>
                                           <option value="White" style="background-color: white; color: black;">White</option>
                                       </select>
                                   </div>
                                   
                                  <div style="margin: 5%;"></div>
                                   <!-- Product Images -->
                                   <!-- Image Section 1 -->
<div class="image-section mb-4" id="image-section-1">
    <h6 class="mb-3">Image 1</h6>
    <div class="image-preview-circle mb-3">
        <img src="<%= product.productImage[0]%>" id="imagePreview1" class="preview-image" alt="Product Image 1">
    </div>

    <!-- Control Buttons -->
    <div class="button-group mb-3">
        <button class="btn btn-outline-dark mb-2 me-2 crop-btn" id="cropButton1">Crop Image</button>
        <button type="button" class="btn btn-outline-danger mb-2 delete-btn" id="delete-btn-1">Delete Image</button>
    </div>

    <!-- File Input Section -->
    <div class="file-input-section mb-4">
        <label for="file-1" class="mb-2">Choose Image 1</label>
        <div class="custom-file-input">
            <input type="file" class="form-control" id="productImage1" name="productImage-1" accept="image/*">
        </div>
    </div>

    <!-- Hidden inputs -->
    <input type="hidden" name="imageModified-1" id="image-modified-1" value="<%= product.productImage[0]%>">
    <input type="hidden" name="deleteImage-1" id="delete-1" value="false">
</div>

<!-- Image Section 2 -->
<div class="image-section mb-4" id="image-section-2">
    <h6 class="mb-3">Image 2</h6>
    <div class="image-preview-circle mb-3">
        <img src="<%= product.productImage[1]%>" id="imagePreview2" class="preview-image" alt="Product Image 2">
    </div>

    <!-- Control Buttons -->
    <div class="button-group mb-3">
        <button class="btn btn-outline-dark mb-2 me-2 crop-btn" id="cropButton2">Crop Image</button>
        <button type="button" class="btn btn-outline-danger mb-2 delete-btn" id="delete-btn-2">Delete Image</button>
    </div>
    <div id="cropModal" style="display: none;">
     <img id="imageToCrop">
     <button id="saveCrop">Save Crop</button>
     <button id="cancelCrop">Cancel</button>
 </div>
    <!-- File Input Section -->
    <div class="file-input-section mb-4">
        <label for="file-2" class="mb-2">Choose Image 2</label>
        <div class="custom-file-input">
            <input type="file" class="form-control" id="productImage2" name="productImage-2" accept="image/*">
        </div>
    </div>

    <!-- Hidden inputs -->
    <input type="hidden" name="imageModified-2" id="image-modified-2" value="<%= product.productImage[1]%>">
    <input type="hidden" name="deleteImage-2" id="delete-2" value="false">
</div>

<!-- Image Section 3 -->
<div class="image-section mb-4" id="image-section-3">
    <h6 class="mb-3">Image 3</h6>
    <div class="image-preview-circle mb-3">
        <img src="<%= product.productImage[2]%>" id="imagePreview3" class="preview-image" alt="Product Image 3">
    </div>

    <!-- Control Buttons -->
    <div class="button-group mb-3">
        <button class="btn btn-outline-dark mb-2 me-2 crop-btn" id="cropButton3">Crop Image</button>
        <button type="button" class="btn btn-outline-danger mb-2 delete-btn" id="delete-btn-3">Delete Image</button>
    </div>

    <!-- File Input Section -->
    <div class="file-input-section mb-4">
        <label for="file-3" class="mb-2">Choose Image 3</label>
        <div class="custom-file-input">
            <input type="file" class="form-control" id="productImage3" name="productImage-3" accept="image/*">
        </div>
    </div>

    <!-- Hidden inputs -->
    <input type="hidden" name="imageModified-3" id="image-modified-3" value="<%= product.productImage[2]%>">
    <input type="hidden" name="deleteImage-3" id="delete-3" value="false">
</div>
                               
           
                                   <!-- Form Actions -->
                                   <div class="row justify-content-end g-2">
                                       <div class="col-lg-2">
                                           <button type="submit" class="btn btn-primary w-100">Update Product</button>
                                       </div>
                                       <div class="col-lg-2">
                                           <button type="reset" class="btn btn-outline-secondary w-100">Cancel</button>
                                       </div>
                                   </div>
                               </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
               <!-- End Container Fluid -->

               <!-- ========== Footer Start ========== -->
               <footer class="footer">
                    <div class="container-fluid">
                         <div class="row">
                              <div class="col-12 text-center">
                                   <script>document.write(new Date().getFullYear())</script> &copy; Larkon. Crafted by <iconify-icon icon="iconamoon:heart-duotone" class="fs-18 align-middle text-danger"></iconify-icon> <a href="https://1.envato.market/techzaa" class="fw-bold footer-text" target="_blank">Techzaa</a>
                              </div>
                         </div>
                    </div>
               </footer>
               <!-- ========== Footer End ========== -->

          </div>
          <!-- ==================================================== -->
          <!-- End Page Content -->
          <!-- ==================================================== -->


     </div>
     <!-- END Wrapper -->

     <!-- Vendor Javascript (Require in all Page) -->
     <script src="/assets/js/vendor.js"></script>

     <!-- App Javascript (Require in all Page) -->
     <script src="/assets/js/app.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     
    
    <script>
     let cropper;
let currentImageIndex = null;
let croppedImages = new Array(3).fill(null);

const imageInputs = [
    document.getElementById('productImage1'),
    document.getElementById('productImage2'),
    document.getElementById('productImage3')
];
const imagePreviews = [
    document.getElementById('imagePreview1'),
    document.getElementById('imagePreview2'),
    document.getElementById('imagePreview3')
];
const cropButtons = [
    document.getElementById('cropButton1'),
    document.getElementById('cropButton2'),
    document.getElementById('cropButton3')
];
const cropModal = document.getElementById('cropModal');
const saveCropButton = document.getElementById('saveCrop');
const cancelCropButton = document.getElementById('cancelCrop');
const imageToCrop = document.getElementById('imageToCrop');
const productForm = document.getElementById("productForm");

// Image Input Change Event Listener
imageInputs.forEach((input, index) => {
    input.addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            if (!file.type.startsWith('image/')) {
                swal('Invalid File', 'Please select an image file', 'error');
                input.value = '';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                imagePreviews[index].src = e.target.result;
                imagePreviews[index].style.display = 'block';
                cropButtons[index].style.display = 'inline-block';

                currentImageIndex = index;
                cropModal.style.display = 'flex';
                imageToCrop.src = e.target.result;

                if (cropper) cropper.destroy();

                cropper = new Cropper(imageToCrop, {
                    aspectRatio: 1,
                    viewMode: 1,
                    autoCropArea: 0.8,
                    zoomable: true,
                    movable: true
                });
            };
            reader.readAsDataURL(file);
        }
    });
});

// Crop Button Click Event
cropButtons.forEach((button, index) => {
    button.addEventListener('click', function() {
        currentImageIndex = index;
        cropModal.style.display = 'flex';
        imageToCrop.src = imagePreviews[index].src;

        if (cropper) cropper.destroy();

        cropper = new Cropper(imageToCrop, {
            aspectRatio: 1,
            viewMode: 1,
            autoCropArea: 0.8,
            zoomable: true,
            movable: true
        });
    });
});

// Save Crop Button
     saveCropButton.addEventListener('click', async function() {
    if (cropper) {
        const canvas = cropper.getCroppedCanvas({
            width: 800,
            height: 800,
            imageSmoothingEnabled: true,
            imageSmoothingQuality: 'high'
        });

        const croppedImageDataUrl = canvas.toDataURL('image/jpeg', 0.9);
        const blob = dataURItoBlob(croppedImageDataUrl);
        croppedImages[currentImageIndex] = blob;
        imagePreviews[currentImageIndex].src = croppedImageDataUrl;


        console.log("crop image",croppedImageDataUrl)

        const productId = document.getElementById("productId").value.trim();
        const formData = new FormData();
        formData.append("productImage", blob, 'cropped-image.jpg');
        formData.append("index", currentImageIndex);
        console.log(`This tidsk ${productId}`)
        try {
            const response = await fetch(`/admin/editProduct/${productId}`, {
                method: 'PUT',
                body: formData
            });

            const result = await response.json();
           
            console.log("image result",result)

            if (result.message) {
               Swal.fire({
                    title: "Image Update!",
                    text: result.message,
                    icon: "success"
               });
            } else {
                throw new Error(result.error || 'Failed to update image');
            }
        } catch (error) {
            console.error('Error:', error);
            swal('Error', 'Failed to update image. Please try again.', 'error');
        }

        cropper.destroy();
        cropModal.style.display = 'none';
    }
});

// Cancel Crop Button
cancelCropButton.addEventListener('click', function() {
    if (cropper) {
        cropper.destroy();
        cropModal.style.display = 'none';
    }
});

// Helper Function for Data URI to Blob
function dataURItoBlob(dataURI) {
    const byteString = atob(dataURI.split(',')[1]);
    const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
    const ab = new ArrayBuffer(byteString.length);
    const ia = new Uint8Array(ab);

    for (let i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }

    return new Blob([ab], { type: mimeString });
}

// Form Validation and Submission
productForm.addEventListener("submit", async function(event) {
    event.preventDefault();

    // Form Field Values
    const productId = document.getElementById("productId").value.trim();
    const name = document.getElementById("name").value.trim();
    const description = document.getElementById("description").value.trim();
    const brand = document.getElementById("brand").value.trim();
    const category = document.getElementById("category").value;
    const regularPrice = parseFloat(document.getElementById("regularPrice").value);
    const salePrice = document.getElementById("salePrice").value;
    const quantity = parseInt(document.getElementById("quantity").value);
    const RAM = document.getElementById("RAM").value;
    const processor = document.getElementById("processor").value;
    const displaySize = document.getElementById("displaySize").value;
    const storage = document.getElementById("storage").value;

    // Basic Validation
    let errorMessage = "";
    if (!name) errorMessage = "Product name is required.";
    else if (!description) errorMessage = "Product description is required.";
    else if (!brand) errorMessage = "Product brand is required.";
    else if (!category) errorMessage = "Product category is required.";
    else if (!regularPrice || regularPrice <= 0) errorMessage = "Regular price must be a positive number.";
    else if (!salePrice || salePrice < 0) errorMessage = "Sale price must be a non-negative number.";
    else if (!quantity || quantity < 0) errorMessage = "Quantity must be a non-negative number.";
    else if (parseFloat(salePrice) > regularPrice) errorMessage = "Sale price cannot be greater than regular price.";
    else if (!RAM) errorMessage = "RAM specification is required.";
    else if (!processor) errorMessage = "Processor specification is required.";
    else if (!displaySize) errorMessage = "Display size specification is required.";
    else if (!storage) errorMessage = "Storage specification is required.";

    if (errorMessage) {
        swal('Validation Error', errorMessage, 'error');
        return;
    }

    // Button Loading State
    const submitButton = document.querySelector('.submit-button');
    const originalButtonText = submitButton.textContent;
    submitButton.textContent = 'Updating Product...';
    submitButton.disabled = true;

    try {
        const response = await fetch(`/admin/updateForm/${productId}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                name,
                description,
                quantity,
                RAM,
                processor,
                displaySize,
                storage,
                brand,
                category,
                regularPrice,
                salePrice,
                productId
            })
        });

        const result = await response.json();
        if (result.message) {
            swal('Success', 'Product updated successfully!', 'success').then(() => {
                window.location.href = "/admin/products";
            });
        } else {
            throw new Error(result.error || 'Failed to update product');
        }
    } catch (error) {
        console.error('Error:', error);
        swal('Error', 'Failed to update product. Please try again.', 'error');
    } finally {
        submitButton.textContent = originalButtonText;
        submitButton.disabled = false;
    }
});

</script>
    

</body>
<!-- Mirrored from techzaa.in/larkon/admin/product-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
</html>