<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/category-list.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Categories List | Larkon - Responsive Admin Dashboard Template</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="/assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="/assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" />

     <!-- Theme Config js (Require in all Page) -->
     <script src="/assets/js/config.js"></script>
</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Categories List</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              <!-- Theme Color (Light/Dark) -->
                              <div class="topbar-item">
                                 
                              </div>

                              <!-- Notification -->
                              <div class="dropdown topbar-item">
                                 
                                   <div class="dropdown-menu py-0 dropdown-lg dropdown-menu-end" aria-labelledby="page-header-notifications-dropdown">
                                        
                                        <div data-simplebar style="max-height: 280px;">
                                             
                                        </div>
                                        
                                   </div>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                   
                              </div>

                              <!-- Activity -->
                              <div class="topbar-item d-none d-md-flex">
                                   
                              </div>

                              <!-- User -->
                              <div class="dropdown topbar-item">
                                   
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <h6 class="dropdown-header">Welcome Gaston!</h6>
                                        <a class="dropdown-item" href="pages-profile.html">
                                             <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Profile</span>
                                        </a>
                                        <a class="dropdown-item" href="apps-chat.html">
                                             <i class="bx bx-message-dots text-muted fs-18 align-middle me-1"></i><span class="align-middle">Messages</span>
                                        </a>

                                        <a class="dropdown-item" href="pages-pricing.html">
                                             <i class="bx bx-wallet text-muted fs-18 align-middle me-1"></i><span class="align-middle">Pricing</span>
                                        </a>
                                        <a class="dropdown-item" href="pages-faqs.html">
                                             <i class="bx bx-help-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Help</span>
                                        </a>
                                        <a class="dropdown-item" href="auth-lock-screen.html">
                                             <i class="bx bx-lock text-muted fs-18 align-middle me-1"></i><span class="align-middle">Lock screen</span>
                                        </a>

                                        <div class="dropdown-divider my-1"></div>

                                        <a class="dropdown-item text-danger" href="auth-signin.html">
                                             <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle">Logout</span>
                                        </a>
                                   </div>
                              </div>

                    
                         </div>
                    </div>
               </div>
          </header>

          <!-- Activity Timeline -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-activity-offcanvas" style="max-width: 450px; width: 100%;">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0 fw-semibold">Activity Stream</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100 p-4">
                              <div class="position-relative ms-2">
                                   <span class="position-absolute start-0  top-0 border border-dashed h-100"></span>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-danger d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:folder-check-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Report-Fix / Update </h5>
                                                  <p class="d-flex align-items-center">Add 3 files to <span class=" d-flex align-items-center text-primary ms-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Tasks</span></p>
                                                  <div class="bg-light bg-opacity-50 rounded-2 p-2">
                                                       <div class="row">
                                                            <div class="col-lg-6 border-end border-light">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-figma fs-20 text-red"></i>
                                                                      <a href="#!" class="text-dark fw-medium">Concept.fig</a>
                                                                 </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-file-doc fs-20 text-success"></i>
                                                                      <a href="#!" class="text-dark fw-medium">larkon.docs</a>
                                                                 </div>
                                                            </div>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-2 text-muted">Monday , 4:24 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-success d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:check-circle-1-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Project Status
                                                  </h5>
                                                  <p class="d-flex align-items-center mb-0">Marked<span class=" d-flex align-items-center text-primary mx-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Design </span> as <span class="badge bg-success-subtle text-success px-2 py-1 ms-1"> Completed</span></p>
                                                  <div class="d-flex align-items-center gap-3 mt-1 bg-light bg-opacity-50 p-2 rounded-2">
                                                       <a href="#!" class="fw-medium text-dark">UI/UX Figma Design</a>
                                                       <div class="ms-auto">
                                                            <a href="#!" class="fw-medium text-primary fs-18" data-bs-toggle="tooltip" data-bs-title="Download" data-bs-placement="bottom"><iconify-icon icon="iconamoon:cloud-download-duotone"></iconify-icon></a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 3:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-primary d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-16">UI</span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15">Larkon Application UI v2.0.0 <span class="badge bg-primary-subtle text-primary px-2 py-1 ms-1"> Latest</span>
                                                  </h5>
                                                  <p>Get access to over 20+ pages including a dashboard layout, charts, kanban board, calendar, and pre-order E-commerce & Marketing pages.</p>
                                                  <div class="mt-2">
                                                       <a href="#!" class="btn btn-light btn-sm">Download Zip</a>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 2:10 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-7.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Alex Smith Attached Photos
                                                  </h5>
                                                  <div class="row g-2 mt-2">
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-6.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-3.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-4.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday 1:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-6.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Rebecca J. added a new team member
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1"><iconify-icon icon="iconamoon:check-circle-1-duotone" class="text-success"></iconify-icon> Added a new member to Front Dashboard</p>
                                                  <h6 class="mt-3 text-muted">Monday 10:00 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-warning d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:certificate-badge-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Achievements
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1 mt-1">Earned a <iconify-icon icon="iconamoon:certificate-badge-duotone" class="text-danger fs-20"></iconify-icon>" Best Product Award"</p>
                                                  <h6 class="mt-3 text-muted">Monday 9:30 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <a href="#!" class="btn btn-outline-dark w-100">View All</a>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->
          


          <%- include("../../views/partials/admin/nav") %>

          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div class="page-content">

               <!-- Start Container Fluid -->
               <div class="container-xxl">
                    <div class="row">
                         <div class="col-xl-12">
                              <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center gap-1">
                                    <h4 class="card-title flex-grow-1">All Categories List</h4>
                                 
                                    <a href="/admin/addCategory" class="btn btn-sm btn-primary">
                                        Add Category
                                    </a>
                                    <div class="app-search-container d-none d-md-block ms-2">
                                        <form class="app-search">
                                             <div class="position-relative d-flex align-items-center">
                                               <input 
                                                 type="search" 
                                                 class="form-control me-2" 
                                                 id="search-input"
                                                 placeholder="Search by category name..." 
                                                 autocomplete="off"
                                               />
                                               <button type="submit" id="search-button" class="btn btn-primary">Search</button>
                                             </div>
                                           </form>
                                      </div>
                                      
                                 </div>
                                   <div>
                                        <div class="table-responsive">
                                             <table class="table align-middle mb-0 table-hover table-centered">
                                                  <thead class="bg-light-subtle">
                                                      <tr>
                                                          <th style="width: 20px;">No.</th>
                                                          <th>Image</th>
                                                          <th>Name</th>
                                                          <th>Description</th>
                                                          <th>Created At</th>
                                                          <th>Updated Date</th>
                                                          <th>Status</th>
                                                          <th>Actions</th>
                                                      </tr>
                                                  </thead>
                                                  <tbody>
                                                       <% cat.forEach((category, index) => { %>
                                                       <tr>
                                                         <td><%= index + 1 %></td>
                                                         <td>
                                                           <div class="d-flex align-items-center gap-2">
                                                             <div class="rounded bg-light avatar-md d-flex align-items-center justify-content-center">
                                                               <img src="<%= category.image %>" alt="<%= category.name %>" class="avatar-md">
                                                             </div>
                                                           </div>
                                                         </td>
                                                         <td>
                                                           <p class="text-dark fw-medium fs-15 mb-0"><%= category.name %></p>
                                                         </td>
                                                         <td><%= category.description %></td>
                                                         <td><%= category.createdAt %></td>
                                                         <td><%= category.updatedAt %></td>
                                                         <td>
                                                           <% if (category.status == "true") { %>
                                                           <span class="badge bg-success">Listed</span>

                                                           <% } else { %>
                                                           <span class="badge bg-danger">Unlisted</span>
                                                           <% } %>
                                                         </td>
                                                         <td>
                                                           <div class="d-flex gap-2">
                                                             <button type="button" class="btn btn-warning">
                                                                 <a href="/admin/editCategory/<%= category._id%>" class="text-white" style="text-decoration: none;">
                                                                      Edit
                                                                 </a>
                                                             </button>
                                                             <% if (category.status === "true") { %>
                                                                 <!-- If category is listed (isListed: true), show the Unlist button -->
                                                                 <button id="list-unlist-btn-<%= category._id %>" class="btn btn-danger" 
                                                                   data-category-id="<%= category._id %>" 
                                                                   data-action="unlist">
                                                                   Unlist
                                                                 </button>
                                                               <% } else { %>
                                                                 <!-- If category is unlisted (isListed: false), show the List button -->
                                                                 <button id="list-unlist-btn-<%= category._id %>" class="btn btn-success" 
                                                                   data-category-id="<%= category._id %>" 
                                                                   data-action="list">
                                                                   List
                                                                 </button>
                                                               <% } %>
                                                               
                                                           </div>
                                                         </td>
                                                       </tr>
                                                       <% }); %>
                                                     </tbody>
                                                     
                                              </table>
                                              
                                        </div>
                                        <!-- end table-responsive -->
                                   </div>
                                   <div class="card-footer border-top">
                                        <nav aria-label="Page navigation example">
                                            <ul class="pagination justify-content-end mb-0">
                                                <!-- Previous Button -->
                                                <% if (currentPage > 1) { %>
                                                    <li class="page-item">
                                                        <a class="page-link" href="?page=<%= currentPage - 1 %>">Previous</a>
                                                    </li>
                                                <% } else { %>
                                                    <li class="page-item disabled">
                                                        <a class="page-link" href="javascript:void(0);">Previous</a>
                                                    </li>
                                                <% } %>
                                    
                                                <!-- Page Numbers -->
                                                <% for (let i = 1; i <= totalPages; i++) { %>
                                                    <% if (i === currentPage) { %>
                                                        <li class="page-item active">
                                                            <a class="page-link" href="javascript:void(0);"><%= i %></a>
                                                        </li>
                                                    <% } else { %>
                                                        <li class="page-item">
                                                            <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                                                        </li>
                                                    <% } %>
                                                <% } %>
                                    
                                                <!-- Next Button -->
                                                <% if (currentPage < totalPages) { %>
                                                    <li class="page-item">
                                                        <a class="page-link" href="?page=<%= currentPage + 1 %>">Next</a>
                                                    </li>
                                                <% } else { %>
                                                    <li class="page-item disabled">
                                                        <a class="page-link" href="javascript:void(0);">Next</a>
                                                    </li>
                                                <% } %>
                                            </ul>
                                        </nav>
                                    </div>
                                    
                              </div>
                         </div>
                    </div>

               </div>
               <!-- End Container Fluid -->

               <!-- ========== Footer Start ========== -->
              
               <!-- ========== Footer End ========== -->

          </div>
          <!-- ==================================================== -->
          <!-- End Page Content -->
          <!-- ==================================================== -->


     </div>
     <!-- END Wrapper -->

     <!-- Vendor Javascript (Require in all Page) -->
     <script src="/assets/js/vendor.js"></script>

     <!-- App Javascript (Require in all Page) -->
     <script src="/assets/js/app.js"></script>
     <script>
          document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('click', function(event) {
              const button = event.target.closest('[data-category-id][data-action]');
              if (button) {
                const categoryId = button.dataset.categoryId;
                const action = button.dataset.action;
                toggleCategoryStatus(categoryId, action);
              }
            });
          });
          
          function toggleCategoryStatus(categoryId, action) {
            if (!categoryId || !action) return;
          
            const url = `/admin/${action}Category`;
            const actionText = action === 'list' ? 'list this category?' : 'unlist this category?';
            const oppositeAction = action === 'list' ? 'unlist' : 'list';
          
            Swal.fire({
              title: 'Are you sure?',
              text: `Do you really want to ${actionText}`,
              icon: 'warning',
              showCancelButton: true,
              confirmButtonColor: '#3085d6',
              cancelButtonColor: '#d33',
              confirmButtonText: 'Yes, do it!'
            }).then((result) => {
              if (result.isConfirmed) {
                $.ajax({
                  url: url,
                  method: 'POST',
                  data: { id: categoryId },
                  headers: {
                    'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]')?.content || ''
                  },
                  success: function(response) {
                    if (response.success) {
                      Swal.fire({
                        title: 'Success!',
                        text: response.message || `Category has been ${action === 'list' ? 'listed' : 'unlisted'} successfully.`,
                        icon: 'success',
                        confirmButtonColor: '#3085d6'
                      }).then(() => {
                        updateButtonState(categoryId, action, oppositeAction);
                      });
                    } else {
                      Swal.fire({
                        title: 'Error!',
                        text: response.message || 'Operation failed.',
                        icon: 'error',
                        confirmButtonColor: '#d33'
                      });
                    }
                  },
                  error: function(xhr) {
                    const errorMsg = xhr.responseJSON?.message || 'Something went wrong while updating category status.';
                    Swal.fire({
                      title: 'Error!',
                      text: errorMsg,
                      icon: 'error',
                      confirmButtonColor: '#d33'
                    });
                  }
                });
              }
            });
          }
          
          function updateButtonState(categoryId, currentAction, newAction) {
            const btn = document.getElementById(`list-unlist-btn-${categoryId}`);
            if (!btn) return;
          
            // Update button style and text
            if (currentAction === 'list') {
              btn.classList.remove('btn-success');
              btn.classList.add('btn-danger');
              btn.textContent = 'Unlist';
            } else {
              btn.classList.remove('btn-danger');
              btn.classList.add('btn-success');
              btn.textContent = 'List';
            }
          
            btn.dataset.action = newAction;
          
            // Update status badge
            const badge = btn.closest('tr').querySelector('.badge');
            if (badge) {
              if (currentAction === 'list') {
                badge.classList.remove('bg-danger');
                badge.classList.add('bg-success');
                badge.textContent = 'Listed';
              } else {
                badge.classList.remove('bg-success');
                badge.classList.add('bg-danger');
                badge.textContent = 'Unlisted';
              }
            }
          }
          </script>

<script>
   document.addEventListener('DOMContentLoaded', function () {
    const searchInput = document.getElementById('search-input');
    const searchButton = document.getElementById('search-button');
    const categoryTable = document.querySelector('tbody');

    function performSearch() {
        const searchTerm = searchInput.value.trim();

        fetch(`/admin/searchCategory?q=${encodeURIComponent(searchTerm)}`, {
            method: 'GET',
            headers: {
                'Accept': 'application/json'
            }
        })
            .then(response => response.json())
            .then(data => {
                categoryTable.innerHTML = '';

                const categories = data.categories;

                if (!categories || categories.length === 0) {
                    categoryTable.innerHTML = '<tr><td colspan="8" class="text-center">No categories found</td></tr>';
                    return;
                }

                categories.forEach((category, index) => {
                    const statusBadge = category.status === "true"
                        ? '<span class="badge bg-success">Listed</span>'
                        : '<span class="badge bg-danger">Unlisted</span>';

                    const actionButton = category.status === "true"
                        ? `<button id="list-unlist-btn-${category._id}" class="btn btn-danger" data-category-id="${category._id}" data-action="unlist">Unlist</button>`
                        : `<button id="list-unlist-btn-${category._id}" class="btn btn-success" data-category-id="${category._id}" data-action="list">List</button>`;

                    const row = `
                        <tr>
                            <td>${category.no}</td>
                            <td>
                                <div class="d-flex align-items-center gap-2">
                                    <div class="rounded bg-light avatar-md d-flex align-items-center justify-content-center">
                                        <img src="${category.image}" alt="${category.name}" class="avatar-md">
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="text-dark fw-medium fs-15 mb-0">${category.name}</p>
                            </td>
                            <td>${category.description}</td>
                            <td>${category.createdAt}</td>
                            <td>${category.updatedAt}</td>
                            <td>${statusBadge}</td>
                            <td>
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-warning">
                                        <a href="/admin/editCategory/${category._id}" class="text-white" style="text-decoration: none;">
                                            Edit
                                        </a>
                                    </button>
                                    ${actionButton}
                                </div>
                            </td>
                        </tr>
                    `;
                    categoryTable.innerHTML += row;
                });

                attachListUnlistHandlers();
            })
            .catch(error => {
                console.error('Search error:', error);
                categoryTable.innerHTML = '<tr><td colspan="8" class="text-center text-danger">Error loading results. Please try again.</td></tr>';
            });
    }

    // Button click
    searchButton.addEventListener('click', performSearch);

    // Enter key
    searchInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            performSearch();
        }
    });

    // Optional: Debounced input search
    let debounceTimer;
    searchInput.addEventListener('input', function () {
        clearTimeout(debounceTimer);
        if (searchInput.value.trim().length > 1) {
            debounceTimer = setTimeout(performSearch, 500);
        }
    });

    function attachListUnlistHandlers() {
        document.querySelectorAll('[id^="list-unlist-btn-"]').forEach(btn => {
            btn.addEventListener('click', function () {
                const categoryId = btn.getAttribute('data-category-id');
                const action = btn.getAttribute('data-action');

                // Optional: Trigger your existing logic here for list/unlist
                console.log(`You clicked ${action} for category ID: ${categoryId}`);
            });
        });
    }
});

   </script>



          
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


</body>


<!-- Mirrored from techzaa.in/larkon/admin/category-list.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
</html>